# FocusLearn Server

–°–µ—Ä–≤–µ—Ä–Ω–∞ —á–∞—Å—Ç–∏–Ω–∞ —Å–∏—Å—Ç–µ–º–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü—ñ—î—é —Ç–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—é —É –Ω–∞–≤—á–∞–ª—å–Ω–æ–º—É –ø—Ä–æ—Ü–µ—Å—ñ.

## –û–ø–∏—Å —Å–∏—Å—Ç–µ–º–∏

FocusLearn - —Ü–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –Ω–∞–≤—á–∞–Ω–Ω—è —á–µ—Ä–µ–∑:
- **–ú–µ—Ç–æ–¥–∏–∫–∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü—ñ—ó** (Pomodoro —Ç–∞ —ñ–Ω—à—ñ —Ç–µ—Ö–Ω—ñ–∫–∏)
- **IoT —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Å–µ—Å—ñ–π
- **–ó–∞–≤–¥–∞–Ω–Ω—è –≤—ñ–¥ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä—ñ–≤** –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é –æ—Ü—ñ–Ω—é–≤–∞–Ω–Ω—è
- **–ê–Ω–∞–ª—ñ—Ç–∏–∫—É –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ** –∑ –ø–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è–º–∏
- **–ù–∞–≤—á–∞–ª—å–Ω—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏** —Ç–∞ —ó—Ö –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—é

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **Backend**: ASP.NET Core 7.0
- **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö**: SQL Server
- **ORM**: Entity Framework Core
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è**: JWT + OAuth2 (Google, Facebook)
- **IoT –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è**: MQTT
- **–õ–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è**: –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞/–ê–Ω–≥–ª—ñ–π—Å—å–∫–∞
- **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è**: Swagger/OpenAPI

## –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

- [.NET 7.0 SDK](https://dotnet.microsoft.com/download/dotnet/7.0)
- [SQL Server](https://www.microsoft.com/sql-server) (LocalDB –ø—ñ–¥—ñ–π–¥–µ –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏)
- [Visual Studio 2022](https://visualstudio.microsoft.com/) –∞–±–æ [VS Code](https://code.visualstudio.com/)
- Git

## –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

### 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
```
git clone [<repository-url>](https://github.com/avokadus725/FocusLearn.git)
cd focuslearn-server
```

### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
```
# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è EF Tools (—è–∫—â–æ –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ)
dotnet tool install --global dotnet-ef

# –û–Ω–æ–≤–ª–µ–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
dotnet ef database update
```

### 3. –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `appsettings.Development.json`:
```
{
  "ConnectionStrings": {
    "DefaultConnection": "Server=(localdb)\\mssqllocaldb;Database=FocusLearnDB;Trusted_Connection=true;TrustServerCertificate=true;"
  },
  "Jwt": {
    "SecretKey": "your-super-secret-key-minimum-32-characters",
    "Issuer": "FocusLearnAPI",
    "Audience": "FocusLearnClient"
  },
  "Authentication": {
    "Google": {
      "ClientId": "your-google-client-id",
      "ClientSecret": "your-google-client-secret"
    },
    "Facebook": {
      "AppId": "your-facebook-app-id",
      "AppSecret": "your-facebook-app-secret"
    }
  },
  "ClientUrl": "http://localhost:3000"
}
```

### 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä—É
```
dotnet restore
dotnet run
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é: `https://localhost:7000`

API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è: `https://localhost:7000/swagger`

## üîß –û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó API

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
- `GET /api/auth/login-google` - –í—Ö—ñ–¥ —á–µ—Ä–µ–∑ Google
- `GET /api/auth/login-facebook` - –í—Ö—ñ–¥ —á–µ—Ä–µ–∑ Facebook

### –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ
- `GET /api/users/my-profile` - –ü—Ä–æ—Ñ—ñ–ª—å –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- `PUT /api/users/my-profile` - –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é

### –ú–µ—Ç–æ–¥–∏–∫–∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü—ñ—ó
- `GET /api/concentrationmethods` - –°–ø–∏—Å–æ–∫ –º–µ—Ç–æ–¥–∏–∫
- `POST /api/concentrationmethods` - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–µ—Ç–æ–¥–∏–∫–∏ (Admin)

### –¢–∞–π–º–µ—Ä —Å–µ—Å—ñ–π
- `POST /api/timer/start` - –ó–∞–ø—É—Å–∫ —Å–µ—Å—ñ—ó –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü—ñ—ó
- `GET /api/timer/status` - –°—Ç–∞—Ç—É—Å –ø–æ—Ç–æ—á–Ω–æ—ó —Å–µ—Å—ñ—ó
- `POST /api/timer/pause` - –ü–∞—É–∑–∞/–≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è
- `POST /api/timer/stop` - –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Å–µ—Å—ñ—ó

### –ó–∞–≤–¥–∞–Ω–Ω—è
- `GET /api/assignments/all` - –î–æ—Å—Ç—É–ø–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è
- `GET /api/assignments/my-assignments` - –ú–æ—ó –∑–∞–≤–¥–∞–Ω–Ω—è
- `POST /api/assignments/{id}/take` - –í–∑—è—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è (Student)
- `POST /api/assignments/{id}/submit` - –ó–¥–∞—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è (Student)
- `POST /api/assignments/{id}/grade` - –û—Ü—ñ–Ω–∏—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è (Tutor)

### –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞
- `GET /api/businesslogic/user-statistics` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- `GET /api/businesslogic/most-effective-method` - –ù–∞–π–µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–∞ –º–µ—Ç–æ–¥–∏–∫–∞
- `GET /api/businesslogic/productivity-coefficient` - –ö–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

## üë• –†–æ–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

- **Student** - –æ—Å–Ω–æ–≤–Ω–∞ —Ä–æ–ª—å, –¥–æ—Å—Ç—É–ø –¥–æ –≤—Å—ñ—Ö –Ω–∞–≤—á–∞–ª—å–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π
- **Tutor** - –º–æ–∂–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è —Ç–∞ –Ω–∞–≤—á–∞–ª—å–Ω—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏
- **Admin** - –ø–æ–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ —Å–∏—Å—Ç–µ–º–∏ —Ç–∞ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π

## üåê IoT —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è

–°–∏—Å—Ç–µ–º–∞ –ø—ñ–¥—Ç—Ä–∏–º—É—î MQTT –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ IoT –ø—Ä–∏—Å—Ç—Ä–æ—è–º–∏:
- **–¢–æ–ø—ñ–∫ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏**: `focuslearn/concentration`
- **–¢–æ–ø—ñ–∫ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è**: `focuslearn/sessions`
- **–ë—Ä–æ–∫–µ—Ä**: `34.243.217.54:1883`

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ—ó —á–∞—Å—Ç–∏–Ω–∏

```
‚îú‚îÄ‚îÄ Controllers/          # API –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏
‚îú‚îÄ‚îÄ Models/
‚îÇ   ‚îú‚îÄ‚îÄ Domain/          # Entity –º–æ–¥–µ–ª—ñ
‚îÇ   ‚îî‚îÄ‚îÄ DTO/             # Data Transfer Objects
‚îú‚îÄ‚îÄ Repositories/
‚îÇ   ‚îú‚îÄ‚îÄ Abstract/        # –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ —Å–µ—Ä–≤—ñ—Å—ñ–≤
‚îÇ   ‚îî‚îÄ‚îÄ Implementation/  # –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å–µ—Ä–≤—ñ—Å—ñ–≤
‚îú‚îÄ‚îÄ Resources/           # –§–∞–π–ª–∏ –ª–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ Middleware/          # –ö–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫—ñ middleware
‚îî‚îÄ‚îÄ Filters/             # –§—ñ–ª—å—Ç—Ä–∏ –¥–ª—è –∑–∞–ø–∏—Ç—ñ–≤
```

## üîí –ë–µ–∑–ø–µ–∫–∞

- JWT —Ç–æ–∫–µ–Ω–∏ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
- OAuth2 —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Google/Facebook
- –§—ñ–ª—å—Ç—Ä —Å—Ç–∞—Ç—É—Å—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- CORS –ø–æ–ª—ñ—Ç–∏–∫–∞ –¥–ª—è –∫–ª—ñ—î–Ω—Ç—Å—å–∫–∏—Ö –¥–æ–¥–∞—Ç–∫—ñ–≤

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤—ñ –ø—Ä–∏–º—ñ—Ç–∫–∏

- –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –º—ñ—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ
- MQTT –±—Ä–æ–∫–µ—Ä –º–æ–∂–µ –±—É—Ç–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π
–Ø–∫—â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –ø—Ä–æ–±–ª–µ–º–∏ –∑ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è–º:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å connection string
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ SQL Server –∑–∞–ø—É—â–µ–Ω–∏–π
3. –í–∏–∫–æ–Ω–∞–π—Ç–µ `dotnet ef database update`
4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø–æ—Ä—Ç–∏ (7000/7001) –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å
